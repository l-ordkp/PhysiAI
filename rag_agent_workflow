// RAG Agent Workflow
digraph {
	rankdir=TB size="8,10"
	START [label=START]
	expand_query [label=expand_query]
	retrieve_context [label=retrieve_context]
	craft_response [label=craft_response]
	score_groundedness [label=score_groundedness]
	refine_response [label=refine_response]
	check_precision [label=check_precision]
	refine_query [label=refine_query]
	max_iterations_reached [label=max_iterations_reached]
	END [label=END]
	START -> expand_query
	expand_query -> retrieve_context
	retrieve_context -> craft_response
	craft_response -> score_groundedness
	score_groundedness -> check_precision [label="Well-grounded"]
	score_groundedness -> refine_response [label="Not grounded"]
	score_groundedness -> max_iterations_reached [label="Max iterations"]
	refine_response -> craft_response
	check_precision -> END [label=Precise]
	check_precision -> refine_query [label="Not precise"]
	check_precision -> max_iterations_reached [label="Max iterations"]
	refine_query -> expand_query
	max_iterations_reached -> END
}
